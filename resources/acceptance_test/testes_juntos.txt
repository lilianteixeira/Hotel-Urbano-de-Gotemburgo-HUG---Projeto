#################
# Caso de Uso 1 #
#################

#iniciaSistema e fechaSistema serao usados para carregar/armazenar os dados do sistema nos arquivos de dados.

iniciaSistema

###############################
#    Cadastro de Hospedes     #
###############################

id1=cadastraHospede nome="Sven Svensson" email="sven@sverige.se" dataNascimento="10/02/1978"
id2=cadastraHospede nome="Ines Brasil" email="ines@brasil.com.br" dataNascimento="05/10/1969"
id3=cadastraHospede nome="Agnetha Faltskog" email="agnetha@abba.se" dataNascimento="05/04/1950"
id4=cadastraHospede nome="Robyn" email="robyn@sverige.se" dataNascimento="12/06/1979"

############################################################################ 
#        Note que o getInfoHospede abaixo tem diferentes parametros.       # 
#   Para esse caso, ele retorna as informacoes referente ao parametro.     # ############################################################################

expect "Sven Svensson"  getInfoHospede id=${id1} atributo="Nome"
expect 10/02/1978 getInfoHospede id=${id1} atributo="Data de Nascimento"

expect "Ines Brasil"  getInfoHospede id=${id2} atributo="Nome"
expect 05/10/1969  getInfoHospede id=${id2} atributo="Data de Nascimento"

expect "Agnetha Faltskog"  getInfoHospede id=${id3} atributo="Nome"
expect 05/04/1950  getInfoHospede id=${id3} atributo="Data de Nascimento"

expect "Robyn"  getInfoHospede id=${id4} atributo="Nome"
expect 12/06/1979  getInfoHospede id=${id4} atributo="Data de Nascimento"

###############################
#      Atualiza Cadastro      #
###############################

atualizaCadastro id=${id1} atributo="Nome" valor="Sven Gudmar Svenson"
expect "Sven Gudmar Svenson"  getInfoHospede id=${id1} atributo="Nome"

atualizaCadastro id=${id2} atributo="Data de Nascimento" valor="25/10/1969"
expect 25/10/1969  getInfoHospede id=${id2} atributo="Data de Nascimento"

atualizaCadastro id=${id3} atributo="Email" valor="agnetha@monomusic.se"

expect "agnetha@monomusic.se"  getInfoHospede id="agnetha@monomusic.se" atributo="Email"

###############################
#      Remove Hospede         #
###############################

removeHospede email="robyn@sverige.se"

expectError "Erro na consulta de hospede. Hospede de email robyn@sverige.se nao foi cadastrado(a)." getInfoHospede id=${id4} atributo="Nome"
expectError "Erro na consulta de hospede. Hospede de email robyn@sverige.se nao foi cadastrado(a)." getInfoHospede id=${id4} atributo="Email"
expectError "Erro na consulta de hospede. Hospede de email robyn@sverige.se nao foi cadastrado(a)." getInfoHospede id=${id4} atributo="Data de Nascimento"

#################
# Caso de Uso 2 #
#################

# Alfred Nobel originalmente nasceu em 1833.
id1=cadastraHospede nome="Alfred Nobel" email="nobel@got.se" dataNascimento="21/10/1983"

#####################################################
# Realiza checkin de alguns hospedes ja cadastrados #
#####################################################
# Lembrando que os precos de quartos sao:           #
# Presidencial 450,00; Luxo 250,00; Simples 100,00  #
#####################################################

realizaCheckin email="sven@sverige.se" dias=5 quarto="1A" tipoQuarto="Presidencial"
realizaCheckin email="sven@sverige.se" dias=3 quarto="2A" tipoQuarto="Presidencial"

realizaCheckin email="ines@brasil.com.br" dias=2 quarto="1B" tipoQuarto="Luxo"

realizaCheckin email="agnetha@monomusic.se" dias=2 quarto="15A" tipoQuarto="Simples"

#############################################
# Checa informacoes das hospedagens criadas #
#############################################

expect "2" getInfoHospedagem email="sven@sverige.se" atributo="Hospedagens ativas"
expect "1" getInfoHospedagem email="ines@brasil.com.br" atributo="Hospedagens ativas"
expect "1" getInfoHospedagem email="agnetha@monomusic.se" atributo="Hospedagens ativas"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email=${id1} atributo="Hospedagens ativas"

expect "1A,2A" getInfoHospedagem email="sven@sverige.se" atributo="Quarto"
expect "1B" getInfoHospedagem email="ines@brasil.com.br" atributo="Quarto"
expect "15A" getInfoHospedagem email="agnetha@monomusic.se" atributo="Quarto"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email=${id1} atributo="Quarto"

expect "R$3600,00" getInfoHospedagem email="sven@sverige.se" atributo="Total"
expect "R$500,00" getInfoHospedagem email="ines@brasil.com.br" atributo="Total"
expect "R$200,00" getInfoHospedagem email="agnetha@monomusic.se" atributo="Total"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email=${id1} atributo="Total"

realizaCheckin email="ines@brasil.com.br" dias=3 quarto="2B" tipoQuarto="Luxo"
expect "2" getInfoHospedagem email="ines@brasil.com.br" atributo="Hospedagens ativas"
expect "1B,2B" getInfoHospedagem email="ines@brasil.com.br" atributo="Quarto"
expect "R$1250,00" getInfoHospedagem email="ines@brasil.com.br" atributo="Total"

atualizaCadastro id=agnetha@monomusic.se atributo="Email" valor="agnetha@abba.se"

#########################################################################
# Quartos jah ocupados nao podem ser usados para criar outra hospedagem #
#########################################################################

expectError "Erro ao realizar checkin. Quarto 1A ja esta ocupado." realizaCheckin email="ines@brasil.com.br" dias=10 quarto="1A" tipoQuarto="Presidencial"

#################
# Caso de Uso 3 #
#################


#####################################################
# Realiza checkin de alguns hospedes ja cadastrados #
#####################################################
# Lembrando que os precos de quartos sao:           #
# Presidencial 450,00; Luxo 250,00; Simples 100,00  #
# Sven: 5 dias, 1A, Pres; 3 dias, 2A, Pres          #
# Ines: 2 dias, 1B, Luxo; 3 dias, 2B, Luxo          #
# Agnetha: 2 dias, 15A, Simples;                    #
#####################################################

expect "R$2250,00" realizaCheckout email="sven@sverige.se" quarto="1A"
expect "R$500,00" realizaCheckout email="ines@brasil.com.br" quarto="1B"
expect "R$200,00" realizaCheckout email="agnetha@abba.se" quarto="15A"

expect "3" consultaTransacoes atributo="Quantidade"
expect "R$2950,00" consultaTransacoes atributo="Total"
expect "Sven Gudmar Svenson;Ines Brasil;Agnetha Faltskog" consultaTransacoes atributo="Nome"

expect "R$2250,00" consultaTransacoes atributo="Total" indice=0
expect "Sven Gudmar Svenson" consultaTransacoes atributo="Nome" indice=0

expect "R$500,00" consultaTransacoes atributo="Total" indice=1
expect "Ines Brasil" consultaTransacoes atributo="Nome" indice=1

expect "R$200,00" consultaTransacoes atributo="Total" indice=2
expect "Agnetha Faltskog" consultaTransacoes atributo="Nome" indice=2

######################################################
# Apesar de realizar checkout, alguns hospedes ainda #
#           possuem hospedagens ativas               #
######################################################
expect "1" getInfoHospedagem email="sven@sverige.se" atributo="Hospedagens ativas"
expect "1" getInfoHospedagem email="ines@brasil.com.br" atributo="Hospedagens ativas"

expectError "Erro na consulta de hospedagem. Hospede Agnetha Faltskog nao esta hospedado(a)." getInfoHospedagem email="agnetha@abba.se" atributo="Hospedagens ativas"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email="nobel@got.se" atributo="Hospedagens ativas"

expect "2A" getInfoHospedagem email="sven@sverige.se" atributo="Quarto"
expect "2B" getInfoHospedagem email="ines@brasil.com.br" atributo="Quarto"

expectError "Erro na consulta de hospedagem. Hospede Agnetha Faltskog nao esta hospedado(a)." getInfoHospedagem email="agnetha@abba.se" atributo="Quarto"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email="nobel@got.se" atributo="Quarto"

expect "R$1350,00" getInfoHospedagem email="sven@sverige.se" atributo="Total"
expect "R$750,00" getInfoHospedagem email="ines@brasil.com.br" atributo="Total"

expectError "Erro na consulta de hospedagem. Hospede Agnetha Faltskog nao esta hospedado(a)." getInfoHospedagem email="agnetha@abba.se" atributo="Total"
expectError "Erro na consulta de hospedagem. Hospede Alfred Nobel nao esta hospedado(a)." getInfoHospedagem email="nobel@got.se" atributo="Total"

##############################################################
# Um novo checkin nao deve alterar o historico de transacoes #
##############################################################
realizaCheckin email="nobel@got.se" dias=1 quarto="1A" tipoQuarto="Luxo"

expect "3" consultaTransacoes atributo="Quantidade"
expect "R$2950,00" consultaTransacoes atributo="Total"
expect "Sven Gudmar Svenson;Ines Brasil;Agnetha Faltskog" consultaTransacoes atributo="Nome"

expect "R$2250,00" consultaTransacoes atributo="Total" indice=0
expect "Sven Gudmar Svenson" consultaTransacoes atributo="Nome" indice=0
expect "R$500,00" consultaTransacoes atributo="Total" indice=1
expect "Ines Brasil" consultaTransacoes atributo="Nome" indice=1
expect "R$200,00" consultaTransacoes atributo="Total" indice=2
expect "Agnetha Faltskog" consultaTransacoes atributo="Nome" indice=2

##############################################################
#             O checkout por sua vez altera                  #
##############################################################

expect "R$250,00" realizaCheckout email="nobel@got.se" quarto="1A"

expect "4" consultaTransacoes atributo="Quantidade"
expect "R$3200,00" consultaTransacoes atributo="Total"
expect "Sven Gudmar Svenson;Ines Brasil;Agnetha Faltskog;Alfred Nobel" consultaTransacoes atributo="Nome"

expect "R$2250,00" consultaTransacoes atributo="Total" indice=0
expect "Sven Gudmar Svenson" consultaTransacoes atributo="Nome" indice=0
expect "R$500,00" consultaTransacoes atributo="Total" indice=1
expect "Ines Brasil" consultaTransacoes atributo="Nome" indice=1
expect "R$200,00" consultaTransacoes atributo="Total" indice=2
expect "Agnetha Faltskog" consultaTransacoes atributo="Nome" indice=2
# Nova transacao referente ao checkout de Nobel.
expect "R$250,00" consultaTransacoes atributo="Total" indice=3
expect "Alfred Nobel" consultaTransacoes atributo="Nome" indice=3

fechaSistema
